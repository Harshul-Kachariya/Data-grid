import{f as U,b as n,j as e,s as $,t as L,v as M}from"./vendor-react-B3mkRaNr.js";import"./vendor-EceFjBgE.js";import"./vendor-aggrid-1u-ABy05.js";const T=[{label:"Item ID",key:"item_id"},{label:"Estimate ID",key:"estimate_id"},{label:"Directory ID",key:"directory_id"},{label:"Company ID",key:"company_id"},{label:"Subject",key:"subject"},{label:"Quantity",key:"quantity"},{label:"Unit",key:"unit"},{label:"Unit Cost",key:"unit_cost"}],Q=({isOpen:u,onClose:m,mode:d,onAddSection:O,onUpdateSection:j,sectionData:a,itemData:r,onAddItem:N,currentSectionId:v})=>{const[x,b]=n.useState(""),[k,p]=n.useState(""),[w,g]=n.useState(!1),[h,c]=n.useState(""),[i,f]=n.useState(!1),[y,S]=n.useState(""),[_,C]=n.useState(""),[I,E]=n.useState(!1),[s,o]=n.useState({subject:"",quantity:"",unit:"",unit_cost:"",item_type_display_name:""});n.useEffect(()=>{u||(b(""),p(""),g(!1),c(""),f(!1))},[u]),n.useEffect(()=>{a&&(S(a.section_name||""),C(a.description||""),E(a.isOptional||!1))},[a]);const q=()=>{if(!x.trim()){c("Section name is required");return}O({name:x.trim(),description:k.trim(),isOptional:w}),b(""),p(""),g(!1),c(""),m()},D=()=>{if(!y.trim()){c("Section name is required");return}j&&a&&j(a.section_id,{section_name:y.trim(),description:_.trim(),isOptional:I}),f(!1)},A=()=>{if(!s.subject){c("Subject is required");return}N&&v&&N(v,{...s,item_id:Date.now(),date_added:new Date().toISOString()}),o({subject:"",quantity:"",unit:"",unit_cost:"",item_type_display_name:""}),m()},F=()=>{switch(d){case"addSection":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm text-gray-600",children:["Section Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:x,onChange:t=>{b(t.target.value),c("")},className:`w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black ${h?"border-red-500":"border-gray-200"} text-black`,placeholder:"Enter section name"}),h&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Description"}),e.jsx("textarea",{value:k,onChange:t=>p(t.target.value),className:"w-full px-3 py-2 border border-gray-200 bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black h-32 text-black",placeholder:"Enter description"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"optional",checked:w,onChange:t=>g(t.target.checked),className:"mr-2 rounded border-gray-300 text-black focus:ring-black"}),e.jsx("label",{htmlFor:"optional",className:"text-sm text-gray-600",children:"Make This Section Optional"})]}),e.jsx("button",{onClick:q,className:"w-full mt-6 py-2 rounded-md text-white bg-black hover:bg-gray-800 transition-colors duration-200",children:"Add Section"})]});case"sectionDetails":return a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Section Name"}),e.jsx("input",{type:"text",value:i?y:a.section_name,onChange:t=>S(t.target.value),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black",readOnly:!i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Description"}),e.jsx("textarea",{value:i?_:a.description||"",onChange:t=>C(t.target.value),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black h-32",readOnly:!i})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"sectionOptional",checked:i?I:a.isOptional,onChange:t=>E(t.target.checked),className:"mr-2 rounded border-gray-300 text-black focus:ring-black",disabled:!i}),e.jsx("label",{htmlFor:"sectionOptional",className:"text-sm text-gray-600",children:"Optional Section"})]}),i&&e.jsxs("button",{onClick:D,className:"w-full mt-4 py-2 rounded-md text-white bg-black hover:bg-gray-800 flex items-center justify-center gap-2",children:[e.jsx(M,{})," Save Changes"]})]});case"itemDetails":return r&&e.jsx("div",{className:"space-y-4",children:T.map(({label:t,key:l})=>e.jsxs("div",{className:"border-b border-gray-100 pb-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:t}),e.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 rounded text-sm",children:l==="date_added"&&r[l]?new Date(r[l]).toLocaleString():l==="unit_cost"||l==="total"?r[l]?`â‚¹${Number(r[l]).toLocaleString()}`:"":r[l]??""})]},l))});case"addItem":return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block mb-2 text-sm text-gray-600",children:["Subject ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.subject,onChange:t=>o({...s,subject:t.target.value}),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Quantity"}),e.jsx("input",{type:"number",value:s.quantity||"",onChange:t=>o({...s,quantity:t.target.value}),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Unit"}),e.jsx("input",{type:"text",value:s.unit,onChange:t=>o({...s,unit:t.target.value}),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Unit Cost"}),e.jsx("input",{type:"number",value:s.unit_cost,onChange:t=>o({...s,unit_cost:t.target.value}),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-2 text-sm text-gray-600",children:"Item Type"}),e.jsx("input",{type:"text",value:s.item_type_display_name,onChange:t=>o({...s,item_type_display_name:t.target.value}),className:"w-full px-3 py-2 border bg-white/50 rounded-md focus:outline-none focus:ring-1 focus:ring-black"})]}),e.jsx("button",{onClick:A,className:"w-full mt-6 py-2 rounded-md text-white bg-black hover:bg-gray-800 transition-colors duration-200",children:"Add Item"})]});default:return null}};return e.jsx("div",{className:`fixed right-0 top-0 h-full w-[420px] bg-white/90 backdrop-blur-sm shadow-lg transition-transform duration-300 ease-in-out border-l border-gray-200 overflow-y-auto
      ${u?"translate-x-0":"translate-x-full"}`,style:{zIndex:1001},children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:d==="addSection"?"Add Section":d==="sectionDetails"?"Section Details":d==="addItem"?"Add Item":"Item Details"}),e.jsxs("div",{className:"flex items-center gap-2",children:[d==="sectionDetails"&&!i&&e.jsx("button",{onClick:()=>f(!0),className:"p-2 rounded-full hover:bg-gray-100/50",children:e.jsx($,{className:"text-xl"})}),e.jsx("button",{onClick:m,className:"p-2 rounded-full hover:bg-gray-100/50",children:e.jsx(L,{className:"text-2xl"})})]})]}),F()]})})},G=U.memo(Q);export{G as default};
